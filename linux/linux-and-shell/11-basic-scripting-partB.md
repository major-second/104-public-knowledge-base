---
title: 构建基本脚本（下）
type: operations
---

[toc]
# 11 构建基本脚本（下）
前置：
- [[11-basic-scripting-partA]]

本篇是[[linux-and-shell/0-metadata]]读书笔记第11章下半部分。
我们大致了解 #Linux 的 #shell 脚本的编写方式，方便做自动化提高 #工作效率
本篇包括管道记号`|`，数学运算，退出脚本
## 11.6 管道记号
- [[unix-pipeline]]
## 11.7 执行数学运算
### 数学运算基础
- `expr 2 \* 3`：注意转义和空格
- 也有一些前缀表达式，例如`expr index aaba b`这样（找**字符**，不是子串）
- `expr index + index d`（把关键字解释成字符串）
- `var1=$(expr 2 + 3)`：赋值（需要`$()`包裹）
- 上面的是Bourne Shell历史遗留，未必方便。
  - 方便的：`var1=$[3 * 4]; var2=$[$var1 * 5]; echo $[$var2 * 6]`输出`360`
- [[shell-float]]不能用上面的方法
## 11.8 退出脚本
`$?`：最后一条指令的退出状态码
比如`0`正常，`127`没找到命令，`130`通过`Ctrl+C`终止，等
`exit <自定义退出码>`：以指定退出码立即退出脚本（注意超过255会溢出）