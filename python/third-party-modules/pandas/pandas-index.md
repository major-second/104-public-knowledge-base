- 前置
  - [[series-dataframe]]
  - `import pandas as pd; import numpy as np; example = pd.DataFrame({i:np.arange(3)+i for i in range(4)}, index=np.arange(3)-1)`
- 本文档不是指狭义的`.index`，而是泛泛说indexing

[toc]
## 行、列
- `print(example.keys(), example.columns, example.index, len(example))`
  - 一行row是一个数据条目
    - 比如一个时间点[[timestamps]]一行
  - 一列column是一种属性
    - 比如[[feature-engineering]]的那些feature
- `print(example[0][-1]); print(example[0:1]); print(example[-1][0])`
  - 默认先说属性（列）再说时间范围（行）
    - 例如：`data[0]`把`0`解释为属性名（列），而不是取第0条（行）数据
  - 少部分例外，例如较老的[[version]]可以`data[0:1]`取出（若干行row的）切片
    - 老版本：无论`.index`如何，`data[0:1]`取出的都是第0行（“相对”而非绝对）
    - 新版本将会取消这种不统一的现象。到时要使用`.iloc`进行这种“相对”定位
## 列[[CRUD]]
- `example['a'] = 7; example.loc[:, 'b'] = [3, 4, 5]; print(example[['a', 'b']]); example.drop(columns=['a'], inplace=True); print(example.columns)`
- 删：参考[[inplace]]
- 增、改
  - 可以是赋予单个数，也可以是序列
    - 但对于还不存在的column，不能直接新增`.loc[row, col]`
    - 而是必须先`df[col] = pd.Series()`增加空白列
  - 可以`[key]`或者`.loc[:, key]`
  - value是`Series`时，要注意有没有让他的`index`和你的`data`的`index`一致
    - 隐蔽的错误：`a, b = [pd.Series([1,1], index=range(i,i+2)) for i in range(2)]; print((a+b).shape)`
    - 输出`(3,)`
  - 注意多重`[]`作为等号左边（左值）会导致和[[copy-paste]]有关的问题，参见[[pandas-loc]]
- 查：
  - “子”数据集：`df[[key0, key1]]`
    - 例如做两个变量间的[[regression]]时，如果只需要[[dropna]]涉及他俩的`NaN`，而不需要全部drop，就需要此“子”数据集
    - 也可以用[[ordered-dict]]思想，即`df[df.columns[0]]`这种
## `.index`属性
- 有了日期时间，即可利用pandas自动读日期时间的功能，设置index
  - `example = example.set_index(1)`
    - 这里不[[inplace]]有[[copy-paste]]
  - 或者[[inplace]]地`example.set_index(1, inplace=True)`
  - 可以在set前后看`.shape, .dtypes, .sample(3)`的变化
- `.index`取出index序列
  - 参考[[series-dataframe]]中的`index`，知道默认值是`0`开始的整数列
  - 还能`.index.start`等取出具体值
  - `.sort_index()`返回按`.index`排序的结果
    - 也有是否[[inplace]]之分
    - 这里返回的结果默认是“按某列排序，但将排序结果扩展到其它列”，而不是只排某一列其它不变
- 二合一过程（读取和设置`index`）
  - 来自[[time-series]]
  - `opsd_daily = pd.read_csv('opsd_germany_daily.csv', index_col=0, parse_dates=True)`
  - `0`号栏此时对应`Date`
- `values`取出具体数值
  - 是[[numpy/basics]]的数组，于是可进行`numpy`的索引等操作，参考[[numpy/basics]]
  - 此时可以抹去`.index`，用于不同时间戳数据对齐和运算等