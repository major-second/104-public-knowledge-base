- https://zhuanlan.zhihu.com/p/35487124
- 排成一圈，每$n$个出局一个人，求最后剩下谁
  - 以下编号从0开始，所以注意[[off-by-one-errors]]
  - 递归关系：找到[[self-similarity]]即规模为$m-m//n$的问题
  - $f(1)=1$
  - 取一个特例[[general-principles/special-case]]看：$n=4,m=9$
    - 出局2人剩7人
    - 报数“计数器”“偏移”了1（本来0开始报数，变成1开始）
    - $f(7)=1$
    - 但首先往回减“偏移”1，变成0
    - 而且这个0是已经出局3, 7后，0124568中的0，而不是0123456中的1
    - 总结$g(9)=f(7)-9\%4$
    - $f(9)=g(9)+g(9)//3$
  - $g(m) =( f(m-m//n)-m\%n +m )\% m $
  - $f(m)=g(m) + g(m) // (n-1) $
- 特例：$n=2$，$m$不是2正整数幂（否则答案显然，直接套用[[fourier-transform]]中的）
  - 套结论得$f(m) =2(( f(m-m//n)-m\%n +m )\% m) $
  - 对于$m=2^n+2k,0<2k<2^n$，$f(m)=2f(2^{n-1}+k)$
  - 对于$m=2^n+2k+1,0<2k+1<2^n$，$f(m)=2f(2^{n-1}+k+1)-2$
    - 这里暂且claim $2f(2^{n-1}+k+1)-2\ge 0$
  - 通过[[induction]]可证明$m=2^n+l\Rightarrow f(m)=2l$，其中$0<l<2^n$
  - 该题变种
    - 依次报数0，1，0，1，改为0出局1留下
    - 你就把原本最后一个放到开头即可，这是[[reduction]]
      - 实质上就是一个[[off-by-one-errors]]差了1
    - 例如2000个人，编号1到2000，那你把2000放到0号位，则最后留下的是$2\times 976=1952$
      - 注：推论：还能马上得出倒数第二个是928，因为1952-1024=928