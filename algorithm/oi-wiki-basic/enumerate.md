- [原文](https://oi-wiki.org/basic/enumerate/)
- 先构思全集，再枚举检查过滤
- 全集
  - 设置好界，否则无界根本做不了，这个含义和[pruning](#pruning)有点区别
  - 参考[[5-constraint-satisfaction]]
  - 例子
    - [[geometry]]格点三角形
    - $x^2-2xsin \frac{\pi x}2 +0.9=0$
      - $x\ne 0, x+0.9/x=2sin\frac{\pi x}2$
        - 容易证明解个数是4
        - 思路：先定范围再逐段[[monotonous]]
      - $0.9$改成$1$：[[equality-separation]]
    - [[tricks]]
- 顺序
  - 比如暴力枚举（简单从小到大之类的）
  - 但选择合适顺序检查可加快速度

[toc]
# pruning
- 可能可以剪枝，减少全集大小
  - 如果全集是某种树结构，满足特定条件就不往下（及时剪枝），则称为[[backtrack]]
  - 如果全集是图结构，那剪枝更加重要，否则出现圈时，可能无限循环，例如[[topo]]深搜法需要维护黑白灰状态
- 有时，剪枝之后才是“主要算法部分”，比如刚刚的[[204-count-primes]]
  - 但有时剪枝本身就是主要算法部分
    - 例如判负环
      - 如果可能出现$1.00000\cdots 1 - 1.00000\cdots 2$这种被[[float]]误差搞坏的情况
      - 那就除了负环，还先留下一些接近0的环
      - 然后枚举判断这些接近0的环是否真的是负的，这时可能用python的`decimal`之类的玩意，或者预先存路径算高精
## 例子
- 利用轮换[[symmetry]] 只看$i\le j$的情况
  - 对于暴力二重循环，减少一半
  - 对于[[204-count-primes]]，直接变成$\sqrt n$
- 放缩[[inequalities]]剪枝
  - [[1-the-sock-drawer]]
- [[stack]]，[[deque]]中保证单调性（找[[tradeoff]]帕累托前沿）其实也相当于枚举基础上剪枝
- 求数组中最大的$a_i-a_j$其中$1\le i<j\le n$
  - 从1到n依次看，每次存之前的最大值并和现在相减看结果
  - 相当于把$O(n^2)$暴力剪成了$O(n)$
# 用于检验
- 对于[[general-principles/special-case]]
  - 取退化情况检验
  - 取个小例子暴力枚举计算检验
    - [[expectation#linearity]]男女相邻题
    - [[4-probability#4.5]] card game
  - 或[[symmetry]]例子利用对称性检验
# 分类讨论
- 人肉思考，枚举出所有可能性，或推理出所有可能信息
  - [[magic-square-forming]]：写代码前先枚举所有可能幻方
  - [[2-7-brain-teasers]]中19题，单线进行不分枝，直接逻辑推理出结果
  - [[bayes-theorem]]
- 参考
  - [[symmetry]]
  - [[reduction]]
  - [[enumerate#pruning]]方法
    - [[estimation]]范围
    - [[modular-arithmetics]]
## 比赛得分例
- 题目
  - 每场比赛$x>y>z>0$正整数一二三名得分
  - $ABC$分别获得$22,9,9$分
  - $B$获得一百米第一名
  - 谁获得铅球第二名？
- 出发点：设$k$场比赛，$k(x+y+z)=40$
- [[estimation]]
  - $x+y+z\ge 6,k<40/6, k\le 6$
  - $x\le 9-1=8\Rightarrow k> 22/8,k\ge 3$
- [[modular-arithmetics]]
  - $k=4, 5$
- [[enumerate#pruning]]
  - $k=4$
    - $x\le 9-3 * 1=6, x+y+z=10$
    - $22\le y+3x<4x,x=6$
    - 容易推出矛盾
- 因此$k=5, x+y+z=8$
- 显然$x,y,z=5,2,1$
## 四包糖
- [[symmetry#轮换]]
- 现有：混合（草莓+柠檬+葡萄），草莓，柠檬，葡萄四包糖
- 四包糖的每个标签都贴错了。比如贴着草莓的，实际一定不是草莓，可能是柠檬、混合、葡萄等
- 现在你总共可以拆两个包，每次各看一颗糖
- 目标：请找出一种策略，使得可以最终保证找到两包非混合糖
  - 第一步拆“混合”标签包
    - 根据对称性，不妨设拆出一颗草莓
    - “混合”标签包中是草莓
  - 再拆“草莓”标签包
    - 若抽出一颗草莓
      - 说明“草莓”标签包中是混合
      - 取“混合”“柠檬”合题意
    - 若抽出一颗非草莓
      - 根据对称性，不妨设拆出一颗柠檬
      - 说明“草莓”标签包中是混合或是柠檬
      - 若“草莓”标签包中是柠檬，则“柠檬”标签包中不可能是混合，否则“葡萄”标签包中是葡萄，矛盾
      - 若“草莓”标签包中是混合，则“柠檬”标签包显然也不是混合
      - 因此直接取“混合”“柠檬”合题意
# 拓展
- [[symmetry]]：机器剪枝人剪枝都很重要
- 全集是博弈树
  - 如枚举证明井字棋无必胜策略
    - 拓展：[[2-7-brain-teasers]]18题：[[topological-space]]和井字棋相同